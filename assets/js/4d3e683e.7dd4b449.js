"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[8797],{2248:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var s=t(4848),a=t(8453);const l={author:"facsert",pubDatetime:new Date("2024-02-22T20:31:38.000Z"),title:"Postgresql data",slug:"Postgresql data",featured:!1,draft:!1,tags:["Postgresql"],description:"Postgresql \u6570\u636e\u64cd\u4f5c"},o=void 0,r={id:"Database/Postgres/postgres-3-data",title:"Postgresql data",description:"Postgresql \u6570\u636e\u64cd\u4f5c",source:"@site/docs/Database/Postgres/postgres-3-data.md",sourceDirName:"Database/Postgres",slug:"/Database/Postgres/Postgresql data",permalink:"/docs/Database/Postgres/Postgresql data",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Database/Postgres/postgres-3-data.md",tags:[{inline:!0,label:"Postgresql",permalink:"/docs/tags/postgresql"}],version:"current",frontMatter:{author:"facsert",pubDatetime:"2024-02-22T20:31:38.000Z",title:"Postgresql data",slug:"Postgresql data",featured:!1,draft:!1,tags:["Postgresql"],description:"Postgresql \u6570\u636e\u64cd\u4f5c"},sidebar:"tutorialSidebar",previous:{title:"Postgresql table",permalink:"/docs/Database/Postgres/Postgresql table"},next:{title:"Postgresql reference",permalink:"/docs/Database/Postgres/Postgresql reference"}},d={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"\u67e5\u8be2\u6570\u636e",id:"\u67e5\u8be2\u6570\u636e",level:2},{value:"\u63d2\u5165\u6570\u636e",id:"\u63d2\u5165\u6570\u636e",level:2},{value:"\u5220\u9664\u6570\u636e",id:"\u5220\u9664\u6570\u636e",level:2},{value:"\u66f4\u65b0\u6570\u636e",id:"\u66f4\u65b0\u6570\u636e",level:2}];function i(e){const n={code:"code",h2:"h2",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:'/* \u521b\u5efa\u4e00\u4e2a\u8868\u4f5c\u4e3a\u793a\u4f8b */\nCREATE TABLE IF NOT EXISTS students (          \n   id SERIAL NOT NULL PRIMARY KEY,             \n   name VARCHAR(20) NOT NULL,                  \n   age  INT,                                   \n   locked BOOLEAN NOT NULL DEFAULT false,      \n   create_at TIMESTAMP NOT NULL              \n);\n\n\\d students\n                                        Table "public.students"\n  Column   |            Type             | Collation | Nullable |               Default\n-----------+-----------------------------+-----------+----------+--------------------------------------\n id        | integer                     |           | not null | nextval(\'students_id_seq\'::regclass)\n name      | character varying(20)       |           | not null |\n age       | integer                     |           |          |\n locked    | boolean                     |           | not null | false\n create_at | timestamp without time zone |           | not null |\nIndexes:\n    "students_pkey" PRIMARY KEY, btree (id)\n\n/* \u8868\u539f\u59cb\u6570\u636e */\n SELECT * FROM students;\n id | name | age | locked |      create_at\n----+------+-----+--------+---------------------\n  2 | Lily |  19 | f      | 2024-02-22 20:31:38\n  1 | John |  20 | f      | 2024-02-22 20:31:38\n  4 | Alen |     | f      | 2024-02-22 20:31:48\n(3 rows)\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u67e5\u8be2\u6570\u636e",children:"\u67e5\u8be2\u6570\u636e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT\n  expression\n  expression\n  ......\nFROM\n  table_name\n\n/* \u8868\u7684\u6240\u6709\u6570\u636e */\nSELECT * FROM students;\n\n/* \u53d6\u6307\u5b9a\u5217 */\nSELECT id,name FROM students;\n id | name\n----+------\n  2 | Lily\n  1 | John\n  4 | Alen\n(3 rows)\n\nSELECT * FROM students\nWHERE age IS NOT NULL;\n\n/* \u67e5\u8be218\u300119\u300120\u5c81\u7684\u5b66\u751f, \u5e76\u4ece\u5927\u5230\u5c0f\u6392\u5e8f */\nSELECT * FROM students\nWHERE age IN (18,19,20)\nORDER BY age DESC;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u63d2\u5165\u6570\u636e",children:"\u63d2\u5165\u6570\u636e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"INSERT INTO table_name(column1, column2, \u2026)\nVALUES\n  (value11, value12, \u2026) [, (value21, value22, \u2026), ...]\n[ON CONFLICT conflict_target conflict_action]\n[RETURNING expr];\n\n/* \u63d2\u5165\u6570\u636e */\nINSERT INTO students (name, age, locked, create_at)\nVALUES\n  ('John', 18, false, '2024-02-22 20:31:38'),\n  ('Lily', 19, false, '2024-02-22 20:31:38');\n> INSERT 0 2\n\n/* \u63d2\u5165\u6570\u636e\u5e76\u8fd4\u56de */\nINSERT INTO students (name, age, locked, create_at)\nVALUES\n  ('John', 18, false, '2024-02-22 20:31:38'),\n  ('Lily', 19, false, '2024-02-22 20:31:38')\nRETURNING name, create_at;\n\nname |      create_at\n----+---------------------\nJohn | 2024-02-22 20:31:38\nLily | 2024-02-22 20:31:38\n\n/* \u67e5\u8be2\u6570\u636e */\nSELECT * FROM students;\n id | name | age | locked |      create_at\n----+------+-----+--------+---------------------\n  1 | John |  18 | f      | 2024-02-22 20:31:38\n  2 | Lily |  19 | f      | 2024-02-22 20:31:38\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"/* \u6dfb\u52a0\u552f\u4e00\u7ea6\u675f */\nALTER TABLE \"students\"\nADD CONSTRAINT unique_student UNIQUE (\"name\", \"age\");\n\n/* \u63d2\u5165\u6570\u636e, \u4e0e unique_student \u89c4\u5219\u91cd\u590d\u5219\u4e0d\u64cd\u4f5c */\nINSERT INTO students (name, age, locked, create_at)\nVALUES\n  ('John', 18, false, '2024-02-22 20:31:38'),\n  ('Lily', 19, false, '2024-02-22 20:31:38')\nON CONFLICT unique_student DO NOTHING;\n\n/* \u63d2\u5165\u6570\u636e, \u4e0e unique_student \u89c4\u5219\u91cd\u590d\u5219\u66f4\u65b0\u90e8\u5206\u6570\u636e */\nINSERT INTO students (name, age, locked, create_at)\nVALUES\n  ('John', 18, false, '2024-02-22 20:31:38'),\n  ('Lily', 19, false, '2024-02-22 20:31:38')\nON CONFLICT unique_student\nDO UPDATE SET\n    name = EXCLUDED.name,\n    age = EXCLUDED.age,\n    locked = EXCLUDED.locked,\nRETURNING *;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5220\u9664\u6570\u636e",children:"\u5220\u9664\u6570\u636e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"DELETE FROM table_name\n[WHERE expression]\n[RETURNING expr];;\n\nDELETE FROM students WHERE id = 3;\n> DELETE 1\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u66f4\u65b0\u6570\u636e",children:"\u66f4\u65b0\u6570\u636e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"UPDATE [IGNORE] table_name\nSET\n    column_name1 = value1,\n    column_name2 = value2,\n    ...\n[WHERE clause]\n[RETURNING expr];\n\nUPDATE students \nSET \n  age = 20 \nWHERE id = 1;\n> UPDATE 1\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(i,{...e})}):i(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var s=t(6540);const a={},l=s.createContext(a);function o(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);