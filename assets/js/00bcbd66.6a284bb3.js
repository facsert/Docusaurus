"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[6256],{649:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var t=n(4848),r=n(8453);const s={author:"facsert",pubDatetime:new Date("2024-01-30T21:12:43.000Z"),title:"Grafana",slug:"Grafana",featured:!1,draft:!1,tags:["Prometheus"],description:"Grafana \u662f\u4e00\u4e2a\u6570\u636e\u53ef\u89c6\u5316\u5de5\u5177"},o=void 0,l={id:"Prometheus/grafana",title:"Grafana",description:"Grafana \u662f\u4e00\u4e2a\u6570\u636e\u53ef\u89c6\u5316\u5de5\u5177",source:"@site/docs/Prometheus/grafana.md",sourceDirName:"Prometheus",slug:"/Prometheus/Grafana",permalink:"/docs/Prometheus/Grafana",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Prometheus/grafana.md",tags:[{inline:!0,label:"Prometheus",permalink:"/docs/tags/prometheus"}],version:"current",frontMatter:{author:"facsert",pubDatetime:"2024-01-30T21:12:43.000Z",title:"Grafana",slug:"Grafana",featured:!1,draft:!1,tags:["Prometheus"],description:"Grafana \u662f\u4e00\u4e2a\u6570\u636e\u53ef\u89c6\u5316\u5de5\u5177"},sidebar:"tutorialSidebar",previous:{title:"Alertmanager",permalink:"/docs/Prometheus/Alertmanager"},next:{title:"PromQl",permalink:"/docs/Prometheus/PromQl"}},i={},d=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u6570\u636e\u6e90",id:"\u6570\u636e\u6e90",level:2},{value:"Dashboard",id:"dashboard",level:2}];function c(e){const a={a:"a",br:"br",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsx)(a.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,t.jsxs)(a.p,{children:["Grafana \u7528\u4e8e\u5c55\u793a Prometheus \u91c7\u96c6\u7684\u76d1\u63a7\u6570\u636e, \u901a\u8fc7 promQL \u8bed\u53e5\u7ed8\u5236\u56fe\u8868\u6216\u4f7f\u7528\u7b2c\u4e09\u65b9\u6a21\u677f\u8fdb\u884c\u6570\u636e\u53ef\u89c6\u5316",(0,t.jsx)(a.br,{}),"\n",(0,t.jsx)(a.a,{href:"https://grafana.com/grafana/download?pg=graf&plcmt=deploy-box-1",children:"Grafana Download"}),"\n",(0,t.jsx)(a.a,{href:"https://grafana.com/grafana/dashboards/",children:"Grafana Template"})]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:' $ tar -zxvf grafana-enterprise-9.5.9.linux-arm64.tar.gz\n $ cd grafana-9.5.9 && ./bin/grafana-server\n > ...\n > logger=licensing t=2023-12-07T15:06:25.331289546+08:00 level=info msg="Validated license token" appURL=http://localhost:3000/ source=disk status=NotFound\n > ...\n'})}),"\n",(0,t.jsxs)(a.p,{children:["\u914d\u7f6e\u6587\u4ef6 ",(0,t.jsx)(a.code,{children:"conf/default.ini"}),", \u793a\u4f8b ",(0,t.jsx)(a.code,{children:"conf/sample.ini"}),(0,t.jsx)(a.br,{}),"\n","\u4fee\u6539 ",(0,t.jsx)(a.code,{children:"default_language"})," \u9009\u9879\u4e3a ",(0,t.jsx)(a.code,{children:"detect"}),"(\u4f7f\u7528\u6d4f\u89c8\u5668\u8bed\u8a00)"]}),"\n",(0,t.jsxs)(a.p,{children:["\u9ed8\u8ba4\u7aef\u53e3\u662f 3000",(0,t.jsx)(a.br,{}),"\n","\u521d\u59cb\u7528\u6237 admin",(0,t.jsx)(a.br,{}),"\n","\u521d\u59cb\u5bc6\u7801 admin"]}),"\n",(0,t.jsx)(a.h2,{id:"\u6570\u636e\u6e90",children:"\u6570\u636e\u6e90"}),"\n",(0,t.jsx)(a.p,{children:"Grafana \u672c\u8eab\u65e0\u6cd5\u91c7\u96c6\u6570\u636e, \u9700\u8981\u5176\u5b83\u5de5\u5177\u63d0\u4f9b\u6570\u636e"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsx)(a.li,{children:"\u5de6\u4e0a\u89d2 Menu => Connections => Data source"}),"\n",(0,t.jsx)(a.li,{children:"\u53f3\u4e0a\u89d2: Add new data source"}),"\n",(0,t.jsx)(a.li,{children:"\u9009\u62e9\u6570\u636e\u6e90(prometheus)"}),"\n",(0,t.jsxs)(a.li,{children:["\u914d\u7f6e\u6570\u636e\u6e90\nName: \u6570\u636e\u6e90\u540d\u79f0\nConnection: prometheus IP \u7aef\u53e3(",(0,t.jsx)(a.code,{children:"http://localhost:9090"}),")\nSave: \u4fdd\u5b58\u6570\u636e\u6e90"]}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"dashboard",children:"Dashboard"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"\u4f7f\u7528 Grafana \u521b\u5efa\u56fe\u8868, \u4f7f\u7528 promQl \u7b5b\u9009\u6570\u636e\u586b\u5165\u56fe\u8868  \n[Dashboard](https://grafana.com/docs/grafana/latest/dashboards/)  \n[Panels and visualizations](https://grafana.com/docs/grafana/latest/panels-visualizations/)  \n\n  \u5de6\u4e0a\u89d2 Menu => Dashboards => \u53f3\u4e0a\u89d2 New\n  New dashboard: \u65b0\u5efa\u4eea\u8868\u76d8\n  New folder: \u65b0\u5efa\u6587\u4ef6\u5939\n  Import: \u5bfc\u5165\u4eea\u8868\u76d8\u6a21\u677f([Grafana Template](#\u5b89\u88c5) \u4e0b\u8f7d\u6a21\u677f\u5f15\u5165)\n\n\u521b\u5efa\u5168\u5c40\u53d8\u91cf\ndashboard setting => Variables => New variable\nName: \u53d8\u91cf\u540d  job\nLabel: \u9009\u62e9\u6846\u540d\u79f0 Job\nQuery type: Label values  \nLabel: job\nMetric: node_uname_info\n\nPanel options: \u4eea\u8868\u76d8\u7684\u6807\u9898\u548c\u63cf\u8ff0  \nTooltip: \u9f20\u6807\u60ac\u505c\u8868\u683c\u663e\u793a\u7684\u914d\u7f6e{Tooltip mode: All, Values sort order: Descending}  \nLegend: \u56fe\u8868\u4e2d\u6570\u636e\u6ce8\u91ca\u663e\u793a\u5f62\u5f0f, {Visibility: true, Mode: List, placement: Right}  \nAxis: \u6570\u8f74\u8bbe\u7f6e default  \nGraph styles: \u56fe\u8868\u4e2d\u6570\u636e\u663e\u793a\u5f62\u5f0f(\u7ebf, \u67f1\u72b6, \u6563\u70b9) {Style: Lines}  \nStandard options: \u6570\u503c\u8bbe\u7f6e(\u5355\u4f4d, \u4e0d\u540c\u6570\u636e\u989c\u8272\u53d8\u5316) {Unit: Percent(0.0-1.0), Color scheme: Classic palette}  \nData links: \u6570\u636e\u6dfb\u52a0\u5916\u90e8\u94fe\u63a5  \nValue mappings: \u6570\u636e\u56fa\u5b9a\u503c\u56fa\u5b9a\u503c\u66ff\u6362\u6587\u672c(\u5982 up \u503c\u4e3a 0 \u66ff\u6362\u4e3a OFF) {0: OFF, 1: ON}  \nThresholds: \u9608\u503c\u989c\u8272\u8bbe\u5b9a {base: green, 70: orange, 90:red, Thresholds mode: Percentage}  \n\n`$__timeFrom` Grafana \u9009\u62e9\u7684\u65f6\u95f4\u8d77\u59cb\u503c  $__timeFrom -> timestamp  \n`$__timeTo` Grafana \u9009\u62e9\u7684\u65f6\u95f4\u7ed3\u675f\u503c  $__timeTo -> timestamp  \n`$__timeFilter` \u5224\u65ad\u65f6\u95f4\u70b9\u662f\u5426\u5728 Grafana \u65f6\u95f4\u6bb5\u5185\u5bb9 $__timeFilter(timestamp) -> bool  \n"})})]})}function h(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>o,x:()=>l});var t=n(6540);const r={},s=t.createContext(r);function o(e){const a=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:a},e.children)}}}]);